import xml.etree.ElementTree as ET
import pprint

import os
#Set the proper current working directory
os.getcwd()
os.chdir('C:/Users/sheethal/Desktop/DWMDB')

def process_map(filename):
    users = set()
    for _, element in ET.iterparse(filename):
        try:
            users.add(element.attrib['uid'])
        except KeyError:
            pass
        element.clear() #to clear memory
    return users

users = process_map('raleigh_north-carolina.osm')
pprint.pprint(users)


#Result:

'''set(['1001935',
     '1007528',
     '1009211',
     '1009305',
     '1012362',
     '1016243',
     '1017856',
     '1023368',
     '103253',
     '10353',
     '10356',
     '103574',
     '1044834',
     '105614',
     '1058308',
     '105839',
     '1058666',
     '106914',
     '10786',
     '1086873',
     '1087647',
     '110263',
     '1106095',
     '110639',
     '1110270',
     '111209',
     '11126',
     '1120694',
     '113450',
     '114161',
     '114174',
     '1149057',
     '11547',
     '11567',
     '115918',
     '116029',
     '1175021',
     '1178684',
     '118021',
     '118856',
     '1196640',
     '1198074',
     '1198763',
     '120146',
     '1204485',
     '1208638',
     '12095',
     '1209932',
     '121241',
     '1214881',
     '1215314',
     '1219875',
     '1220437',
     '1222367',
     '1224045',
     '1228319',
     '123633',
     '1236951',
     '1240849',
     '125718',
     '1260280',
     '1261925',
     '128017',
     '1283889',
     '128943',
     '1290042',
     '129132',
     '1293986',
     '129531',
     '129854',
     '1299518',
     '1299608',
     '130065',
     '1302208',
     '1306',
     '13203',
     '1322605',
     '1323363',
     '132776',
     '1330847',
     '135163',
     '1355910',
     '1358',
     '136804',
     '1373741',
     '1376118',
     '13832',
     '140550',
     '1408522',
     '1409238',
     '141037',
     '141770',
     '1425455',
     '1428732',
     '1428996',
     '14293',
     '1430290',
     '143573',
     '1443963',
     '1445105',
     '145231',
     '145317',
     '146680',
     '1469063',
     '147510',
     '14850',
     '1494110',
     '1501408',
     '150272',
     '151559',
     '152289',
     '1535212',
     '153669',
     '15398',
     '1542454',
     '1546017',
     '1554107',
     '155680',
     '158696',
     '1590074',
     '160651',
     '160949',
     '1611',
     '161951',
     '1624038',
     '162924',
     '16330',
     '1636237',
     '164595',
     '1647043',
     '164928',
     '1649645',
     '165116',
     '16591',
     '166129',
     '167026',
     '167417',
     '1679',
     '1679807',
     '169004',
     '1694420',
     '1694880',
     '1697',
     '1711073',
     '1711415',
     '1723051',
     '1729614',
     '173053',
     '1736356',
     '1739369',
     '1746874',
     '175250',
     '1754491',
     '175600',
     '1757781',
     '1770101',
     '1775883',
     '1777041',
     '1781639',
     '178186',
     '1782960',
     '17857',
     '1798647',
     '1802220',
     '1806283',
     '18069',
     '1808313',
     '181135',
     '1815798',
     '1819792',
     '1821160',
     '1828630',
     '1828671',
     '1829683',
     '1832883',
     '1836471',
     '1845697',
     '1848389',
     '1851863',
     '1858017',
     '186078',
     '1862768',
     '1862954',
     '1864944',
     '1866260',
     '1867287',
     '1869781',
     '1870478',
     '1870484',
     '1871784',
     '1872505',
     '1875599',
     '1877562',
     '18776',
     '1883376',
     '1884281',
     '1885430',
     '188708',
     '1887084',
     '1888198',
     '1888431',
     '1888796',
     '1903401',
     '190869',
     '1909528',
     '191339',
     '1919435',
     '1924531',
     '1933932',
     '1936177',
     '1947668',
     '1951037',
     '1954346',
     '1960024',
     '1963506',
     '1963766',
     '1964110',
     '1975032',
     '1985021',
     '1986218',
     '1986946',
     '198922',
     '1989586',
     '1991718',
     '1991900',
     '1995210',
     '1998966',
     '199905',
     '2000678',
     '2004847',
     '2012449',
     '201359',
     '2020110',
     '2023505',
     '2027252',
     '2027261',
     '2029016',
     '2029229',
     '2029428',
     '2032003',
     '2033565',
     '2034846',
     '2035209',
     '2035219',
     '2035223',
     '2035279',
     '2036454',
     '2039316',
     '2040028',
     '2040234',
     '2040511',
     '2041366',
     '2041512',
     '2041606',
     '2041646',
     '2041732',
     '2041744',
     '2041793',
     '2041889',
     '2041900',
     '2044831',
     '204929',
     '2053369',
     '205446',
     '2055158',
     '2056158',
     '2065004',
     '2072472',
     '207581',
     '207745',
     '2078284',
     '2081429',
     '2087539',
     '2098556',
     '2099946',
     '2105070',
     '2115749',
     '2126063',
     '2130688',
     '2132284',
     '2134515',
     '2136416',
     '2136891',
     '2137177',
     '21374',
     '213831',
     '2140914',
     '2143935',
     '214969',
     '2173274',
     '2173336',
     '2178811',
     '2183497',
     '2186077',
     '2192737',
     '2197971',
     '2199975',
     '22028',
     '2212553',
     '22138',
     '2219338',
     '2226690',
     '2226712',
     '2229024',
     '224440',
     '2252332',
     '2252602',
     '2252860',
     '2254085',
     '2254200',
     '2254218',
     '2257567',
     '2265161',
     '2283456',
     '2291431',
     '2294834',
     '2298916',
     '2300088',
     '230091',
     '2302638',
     '2312069',
     '231477',
     '2318',
     '2319906',
     '2320096',
     '232126',
     '233248',
     '2347227',
     '2351546',
     '23517',
     '2355638',
     '2358015',
     '2362154',
     '236412',
     '2377377',
     '2395258',
     '2397936',
     '239998',
     '2403997',
     '2405815',
     '2406578',
     '242297',
     '243003',
     '243857',
     '2441939',
     '2452389',
     '245377',
     '246',
     '247879',
     '248304',
     '2497300',
     '2502440',
     '250611',
     '250807',
     '2511706',
     '2522143',
     '2525841',
     '2527838',
     '252811',
     '252909',
     '2533536',
     '25398',
     '2541149',
     '2554698',
     '2557376',
     '2593098',
     '2595971',
     '260703',
     '260982',
     '262151',
     '2623449',
     '2624284',
     '2625625',
     '262940',
     '26299',
     '26599',
     '2676780',
     '2677547',
     '2677779',
     '2691299',
     '2713234',
     '2722223',
     '2748195',
     '274857',
     '2753800',
     '2760952',
     '2767782',
     '2768579',
     '2772966',
     '2789618',
     '2801897',
     '2802787',
     '28145',
     '2818178',
     '282230',
     '28559',
     '2856453',
     '2859265',
     '28744',
     '28775',
     '28783',
     '287920',
     '289825',
     '290680',
     '29320',
     '293774',
     '296264',
     '29729',
     '298513',
     '299860',
     '30521',
     '310589',
     '311102',
     '31231',
     '314272',
     '320203',
     '321862',
     '322785',
     '326457',
     '32952',
     '332709',
     '334313',
     '336460',
     '336929',
     '339672',
     '340446',
     '344316',
     '345449',
     '350535',
     '352368',
     '355242',
     '356',
     '357109',
     '3582',
     '359246',
     '360392',
     '36121',
     '362316',
     '366306',
     '366473',
     '368215',
     '36870',
     '370317',
     '371',
     '37320',
     '379381',
     '38487',
     '384894',
     '389719',
     '39457',
     '39504',
     '3962',
     '396743',
     '39688',
     '398086',
     '398300',
     '398883',
     '401490',
     '401813',
     '402624',
     '40397',
     '403998',
     '405293',
     '4054',
     '406554',
     '406835',
     '406845',
     '406846',
     '406849',
     '406850',
     '406852',
     '406861',
     '406862',
     '406864',
     '406867',
     '407279',
     '407289',
     '407315',
     '407319',
     '407321',
     '407325',
     '407326',
     '407329',
     '407330',
     '407331',
     '409871',
     '409935',
     '410571',
     '412390',
     '412575',
     '414318',
     '416989',
     '419228',
     '42123',
     '421708',
     '42191',
     '423291',
     '42429',
     '430750',
     '43566',
     '436419',
     '440874',
     '44217',
     '44221',
     '44312',
     '44355',
     '4467',
     '447379',
     '451048',
     '451067',
     '451693',
     '451963',
     '45243',
     '453950',
     '454212',
     '454589',
     '45738',
     '46166',
     '461885',
     '462298',
     '468896',
     '469297',
     '4697',
     '470034',
     '470738',
     '473104',
     '4732',
     '473471',
     '475877',
     '47681',
     '477975',
     '478161',
     '47892',
     '48176',
     '4944',
     '4951',
     '500006',
     '50624',
     '51045',
     '510836',
     '5193',
     '522859',
     '527535',
     '52898',
     '52959',
     '53050',
     '53073',
     '5359',
     '54419',
     '5446',
     '54759',
     '554234',
     '558351',
     '55916',
     '55945',
     '560216',
     '564585',
     '570315',
     '570991',
     '57158',
     '573277',
     '5748',
     '575206',
     '579791',
     '582513',
     '586545',
     '587790',
     '592724',
     '592819',
     '593205',
     '593212',
     '593214',
     '593842',
     '596047',
     '596148',
     '59768',
     '605404',
     '60744',
     '609926',
     '614539',
     '615726',
     '618377',
     '618879',
     '621090',
     '621221',
     '623652',
     '624748',
     '629346',
     '630082',
     '630296',
     '63107',
     '634145',
     '634922',
     '6424',
     '64482',
     '645457',
     '645569',
     '646133',
     '648125',
     '648128',
     '648502',
     '64949',
     '65148',
     '661022',
     '663559',
     '666463',
     '66944',
     '67240',
     '674519',
     '67462',
     '67862',
     '683428',
     '683530',
     '687159',
     '6879',
     '691732',
     '691968',
     '694507',
     '695421',
     '69628',
     '6975',
     '702653',
     '703517',
     '703657',
     '70696',
     '714646',
     '7168',
     '722137',
     '725620',
     '735541',
     '7412',
     '745841',
     '748252',
     '74937',
     '752196',
     '757042',
     '765106',
     '77114',
     '772151',
     '775666',
     '779673',
     '78656',
     '795668',
     '80046',
     '80285',
     '803077',
     '818552',
     '82820',
     '8287',
     '84054',
     '843432',
     '84372',
     '848765',
     '84983',
     '860575',
     '86504',
     '86703',
     '8703',
     '873387',
     '874127',
     '87464',
     '87586',
     '881119',
     '882424',
     '88337',
     '900066',
     '900461',
     '902725',
     '905316',
     '922360',
     '92274',
     '92286',
     '93847',
     '944876',
     '94578',
     '967088',
     '969831',
     '978094',
     '981539',
     '992967',
     '996997',
     '998608'])
     '''
